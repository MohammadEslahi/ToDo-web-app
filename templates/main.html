{% load static %}
<!doctype html>
<html>
  <head>
    <title>To-Do list</title>
  </head>
  <body>
    <!-- Showing messages -->
    {% if messages %}
      {% for message in messages %}
        {{message}}
      {% endfor %}
    {% endif %}

    {% if not request.user.id %}
      <h4>You are not signed in</h4>
      <a href="{% url 'login' %}">Login</a>
      or
      <a href="{% url 'register' %}">register</a>
    {% endif %}

    {% if request.user.id %}
    <h4>Hi, {{request.user}}</h4>
      <form method="post" action="{% url 'logout' %}">{%csrf_token%}
        <button type="submit">Logout</button>
      </form>
      or
      <a href="{% url 'edituser' request.user.id %}">edit credentials!</a>
    {% endif %}
    <hr>

    
    {% if request.user.is_authenticated %}
      <a href="{% url 'categories' request.user.id %}">Add new category</a>  
  
    <!-- Form for adding Task -->
    <form method="post" enctype="multipart/form-data">{% csrf_token %}
      Add your new Task<br>
      {{task_form.as_p}}
        <input type="submit" name="add_task" value="Add">
    </form>

    <!-- Showing all tasks -->
      {% if tasks %}
        Your <b><i>Tasks</i></b> are here...
      {% else %}
        No tasks yet...
      {% endif %}
    {% endif %}

    <!-- showing unchecked tasks -->
    {% for task in tasks %}
      {% if not task.checked %}
        <ul>
          <form method="post" action="{% url 'checker' task.id %}" style="display: inline;">{%csrf_token%}
            <input type="checkbox" name="checked" onchange="this.form.submit()" style="cursor: pointer;">
          </form>
          <a href=" {% url 'delete' task.pk %}"><img src="{% static 'images/delete_icon.png' %}" width="15" height="15"></a>
          <a href=" {% url 'update' task.pk %}"><img src="{% static 'images/edit_icon.png' %}" width="15" height="15"></a>
          {{task}}
        </ul>
      {% endif %}
    {% endfor %}
    

        <!-- showing checked tasks -->
    {% for task in tasks %}
      {% if task.checked %}
        <ul>
          <form method="post" action="{% url 'unchecker' task.id %}" style="display: inline;">{%csrf_token%}
            <input type="checkbox" checked name="checked" onchange="this.form.submit()" style="cursor: pointer;">
          </form>
          <a href=" {% url 'delete' task.pk %}"><img src="{% static 'images/delete_icon.png' %}" width="15" height="15"></a>
          <a href=" {% url 'update' task.pk %}"><img src="{% static 'images/edit_icon.png' %}" width="15" height="15"></a>
          <strike>{{task}}</strike></ul>  
      {% endif %}
    {% endfor %}
  </body>
</html>